# Тестирование с использованием Pytest
Описываем работу скрипта тестирования с использованием популярной библиотеки pytest в Python. 
Скрипт реализует несколько тестов для двух функций: mask_account_card() и get_date().

## Назначение скрипта:
Скрипт служит демонстрационным примером того, 
как эффективно организовывать и проводить тестирование кода с помощью библиотеки pytest. В нём демонстрируется:

Работа с параметрами (@pytest.mark.parametrize);
Организация позитивных и негативных тестов;
Обработка ошибок и проверка их возникновения.

## Структура скрипта:
Импорты: Вначале подключаются необходимые модули и библиотеки:

pytest — библиотека для организации и запуска тестов;

src.widget — модуль, содержащий функции, которые нужно протестировать;

datetime — стандартный модуль Python для работы с датами и временем.

## Определение функций:
mask_account_card(info_string: str) → str: функция принимает строку, содержащую название карты и её номер, 
и формирует замаскированную версию номера карты (показываются только первые 6 и последние 4 цифры);

get_date(date_str: str) → str: функция принимает строку с временной отметкой в формате ISO 8601 
и возвращает форматированную дату в виде "DD.MM.YYYY".

## Написание тестов:
Позитивные тесты (test_mask_account_card, test_get_date): 
тесты проверяют корректную работу функций с корректными входными данными;

Негативные тесты (test_mask_account_card_negative): 
тесты проверяют реакцию функций на некорректные входные данные (например, слишком длинный номер карты).

## Параметризация тестов:
Для удобства тестирования применяется параметризация тестов с помощью декораторов @pytest.mark.parametrize. 
Это позволяет задать множество тестов с разными наборами входных данных и ожидаемых результатов.

## Работа с ошибками:
Если входные данные некорректны, функции поднимают исключение ValueError, что проверяется в тестах.

## Примеры тестов:
# Тесты на маскировку номеров карт:

@pytest.mark.parametrize("input_data, expected", [
    ("Visa Platinum 7000792289606361", "Visa Platinum 7000 79** **** 6361"),
    ("Maestro 1596837868705199", "Maestro 1596 83** **** 5199"),
    ("Счет 7365410843014305", "Счет **4305"),
    ("Visa Gold 5999414228426353", "Visa Gold 5999 41** **** 6353"),
])
def test_mask_account_card(input_data, expected):
    result = mask_account_card(input_data)
    assert result.strip() == expected.strip()

# Тесты на обработку некорректных данных:

@pytest.mark.parametrize("input_data", [
    "Visa Platinum 7000792289606361123123",  # Слишком длинный номер
    "CrazyCard 123",                          # Некорректный тип карты
])
def test_mask_account_card_negative(input_data):
    with pytest.raises(ValueError):
        mask_account_card(input_data)
# Тесты на форматирование даты:

@pytest.mark.parametrize("date_str, expected", [
    ("2024-03-11T02:26:18.671407", "11.03.2024"),
    ("2019-07-03T18:35:29.512364", "03.07.2019"),
])
def test_get_date(date_str, expected):
    assert get_date(date_str) == expected

# Как запустить тесты:
Запустить тесты можно с помощью команды: pytest your_script.py
Команда выполнит все тесты и покажет подробную статистику о прохождении тестов и возможных ошибках.

Этот скрипт демонстрирует базовую организацию тестов с помощью библиотеки pytest. 
Такие тесты помогают контролировать качество кода и быстро выявлять ошибки при изменении логики функций.